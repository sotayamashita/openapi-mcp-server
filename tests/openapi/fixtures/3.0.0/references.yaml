openapi: 3.0.0
info:
  title: References API
  version: 1.0.0
  description: API with various reference types
paths:
  /users:
    get:
      summary: Get all users
      operationId: getUsers
      parameters:
        - $ref: "#/components/parameters/limitParam"
        - $ref: "#/components/parameters/skipParam"
      responses:
        "200":
          $ref: "#/components/responses/UsersResponse"
        "400":
          $ref: "#/components/responses/BadRequest"
        "500":
          $ref: "#/components/responses/ServerError"
  /users/{userId}:
    get:
      summary: Get user by ID
      operationId: getUserById
      parameters:
        - $ref: "#/components/parameters/userIdParam"
      responses:
        "200":
          $ref: "#/components/responses/UserResponse"
        "404":
          $ref: "#/components/responses/NotFound"
        "500":
          $ref: "#/components/responses/ServerError"
components:
  parameters:
    limitParam:
      name: limit
      in: query
      description: Maximum number of items to return
      required: false
      schema:
        type: integer
        minimum: 1
        maximum: 100
        default: 20
    skipParam:
      name: skip
      in: query
      description: Number of items to skip
      required: false
      schema:
        type: integer
        minimum: 0
        default: 0
    userIdParam:
      name: userId
      in: path
      description: ID of the user
      required: true
      schema:
        type: string
  schemas:
    User:
      type: object
      required:
        - id
        - name
        - email
      properties:
        id:
          type: string
        name:
          type: string
        email:
          type: string
        address:
          $ref: "#/components/schemas/Address"
    Address:
      type: object
      properties:
        street:
          type: string
        city:
          type: string
        zipCode:
          type: string
        country:
          type: string
    Error:
      type: object
      required:
        - code
        - message
      properties:
        code:
          type: integer
        message:
          type: string
  responses:
    UsersResponse:
      description: List of users
      content:
        application/json:
          schema:
            type: array
            items:
              $ref: "#/components/schemas/User"
    UserResponse:
      description: A single user
      content:
        application/json:
          schema:
            $ref: "#/components/schemas/User"
    BadRequest:
      description: Bad request
      content:
        application/json:
          schema:
            $ref: "#/components/schemas/Error"
    NotFound:
      description: Resource not found
      content:
        application/json:
          schema:
            $ref: "#/components/schemas/Error"
    ServerError:
      description: Internal server error
      content:
        application/json:
          schema:
            $ref: "#/components/schemas/Error"
